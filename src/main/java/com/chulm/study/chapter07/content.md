#Overview

- Stream 데이터 컬렉션 관련 동작을 얼마나 쉽게 병렬로 실행할 수 있는지 설명
- 병렬 스트림으로 데이터를 처리할 때 Atomic(원자성)과 성능에 유의하여 효과적으로 사용하자.
- 병렬 스트림은 내부적으로 ForkJoinPool을 사용한다.
- 기본적으로 FOrJoinPool은 프로세서 수, 즉 Runtime.getRuntime().availableProcessors()가 반환하는 값의 스레드를 갖는다.


### 병렬 스트림 효과적으로 사용하기

- 확신이 서지 않는 다면 직접 측정하라. 항상 병렬 스트림이 빠른 것은 아니다.
- 박싱을 주의하라. 자바8 은 박싱동작을 피할 수 있는 기본형 특화 스트림을 제공한다.(IntStream,LongStream,..)
- 순차스트림보다 병렬 스트림에서 성능이 떨어지는 연산이 있다. limit이나 findFirst처럼 순서에 의존하는 연산은 비싼 비용을 치른다.
- 스트림에서 수행하는 전체 파이프라인 연산 비용을 고려하라.
- 적은양의 데이터는 오히려 병렬 스트림에 도움되지 않는다.
- 자료구조가 적절한지 확인하라
- 최종 연산의 병합과정(collector의 combiner 메소드와 같은 ) 비용을 살펴봐라.



### Fork / Join Framework

- 포크 조인 프레임워크는 병렬화 할 수 있는 작업을 재귀적으로 작업 작업으로 분할한 다음 서브태스크 각각의 결과를 합쳐 전체 결과를 만들도록 설계되었다.
- 서브태스크 스레드를 스레드 풀의 작업자 스레드에 분산 할당하는 Excutor 인터페이스를 구현한다.

- 쓰레드 풀을 이용하려면 RecursiveTask(재귀) 서브 클래스를 만들어야 하며, 추상 메소드 compute를 구현해야한다.

protected abstrct R compute();


### 포크 조인 프레임워크의 효과적 사용

- 조인 메서드를 태스크에 호출하면 태스크가 생산하는 결과가 준비될 때까지 호출차를 블록한다.
- RecursiveTask 내에서는 pool의 invoke를 활용하지 말아야한다.



